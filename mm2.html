<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Category‑Wise To‑Do App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root { --accent: #6f42c1; }
    body { background: linear-gradient(125deg,#f0f4ff,#fff); }
    .app-card { border-radius: 18px; box-shadow: 0 8px 26px rgba(0,0,0,.06); }
    .accent { background: linear-gradient(90deg,var(--accent),rgba(0,0,0,0.06)); color:white }

    .task-enter { animation: enter .35s ease; }
    .task-leave { animation: leave .3s forwards ease-in; }
    @keyframes enter { from{opacity:0;transform:translateY(-10px)} to{opacity:1;transform:none} }
    @keyframes leave { to{opacity:0;transform:translateX(20px);height:0;margin:0;padding:0} }

    .task-img { height:80px; width:110px; object-fit:cover; border-radius:12px }

    .swatch { width:32px;height:32px;border-radius:8px;cursor:pointer;border:2px solid #fff; }
  </style>
</head>
<body>

<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold">Category‑Wise Animated To‑Do App</h3>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#loginModal">Login</button>
  </div>

  <div class="row g-4">

    <!-- Task Input Card -->
    <div class="col-lg-4">
      <div class="app-card p-4 bg-white">
        <h5>Add Task</h5>
        <form id="taskForm" class="mt-3">

          <label class="form-label fw-semibold">Title</label>
          <input id="taskTitle" class="form-control" placeholder="Task title" required>

          <label class="form-label mt-3 fw-semibold">Image URL (optional)</label>
          <input id="taskImage" class="form-control" placeholder="Image URL">

          <label class="form-label mt-3 fw-semibold">Category</label>
          <select id="taskCategory" class="form-select" required>
            <option value="Personal">Personal</option>
            <option value="Professional">Professional</option>
            <option value="Work">Work</option>
            <option value="Study">Study</option>
            <option value="Shopping">Shopping</option>
          </select>

          <label class="form-label mt-3 fw-semibold">Size</label>
          <div class="btn-group w-100">
            <input type="radio" class="btn-check" name="size" id="sizeSm" value="sm">
            <label class="btn btn-outline-secondary" for="sizeSm">Small</label>

            <input type="radio" class="btn-check" name="size" id="sizeMd" value="md" checked>
            <label class="btn btn-outline-secondary" for="sizeMd">Medium</label>

            <input type="radio" class="btn-check" name="size" id="sizeLg" value="lg">
            <label class="btn btn-outline-secondary" for="sizeLg">Large</label>
          </div>

          <label class="form-label mt-3 fw-semibold">Color Tint</label>
          <div id="swatches" class="d-flex gap-2">
            <span class="swatch" data-color="#6f42c1" style="background:#6f42c1"></span>
            <span class="swatch" data-color="#0d6efd" style="background:#0d6efd"></span>
            <span class="swatch" data-color="#198754" style="background:#198754"></span>
            <span class="swatch" data-color="#dc3545" style="background:#dc3545"></span>
          </div>

          <button class="btn btn-primary w-100 mt-4">Add Task</button>
        </form>
      </div>
    </div>

    <!-- Categories & Tasks -->
    <div class="col-lg-8">
      <div class="d-flex justify-content-between">
        <h5 class="fw-bold">Tasks by Category</h5>
        <button id="clearAll" class="btn btn-outline-danger btn-sm">Clear All</button>
      </div>

      <div id="categories" class="mt-3">
        <!-- Dynamic categories here -->
      </div>
    </div>
  </div>
</div>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header accent">
        <h5 class="modal-title text-white">Login</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label>Email</label>
        <input class="form-control mb-3" id="loginEmail">

        <label>Password</label>
        <input class="form-control" type="password" id="loginPassword">

        <button class="btn btn-primary w-100 mt-3">Login</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
let tasks = JSON.parse(localStorage.getItem("cat_tasks") || "[]");
let currentTint = "#6f42c1";

function save(){ localStorage.setItem("cat_tasks", JSON.stringify(tasks)); }

function render(){
  const box = document.getElementById("categories");
  box.innerHTML = "";

  const grouped = {};
  tasks.forEach(t=>{ if(!grouped[t.category]) grouped[t.category]=[]; grouped[t.category].push(t); });

  Object.keys(grouped).forEach(cat=>{
    const card = document.createElement("div");
    card.className = "app-card bg-white p-3 mb-4";
    card.innerHTML = `
      <h6 class="fw-bold mb-3">${cat}</h6>
      <div class="row g-3"></div>`;

    const row = card.querySelector(".row");

    grouped[cat].forEach((t,i)=>{
      const col = document.createElement("div");
      col.className = "col-md-6";
      col.innerHTML = `
        <div class="task-enter p-3 border rounded-3" style="border-color:${t.tint}40; box-shadow:0 5px 16px ${t.tint}20;">
          <div class="d-flex gap-3">
            <img src="${t.image || 'https://picsum.photos/200'}" class="task-img">
            <div class="flex-grow-1">
              <div class="fw-semibold">${t.title}</div>
              <small class="text-muted">${t.size}</small>
              <div class="mt-2">
                <button class="btn btn-sm btn-success" onclick="done('${t.id}')"><i class='bi bi-check'></i></button>
                <button class="btn btn-sm btn-danger" onclick="removeTask('${t.id}')"><i class='bi bi-trash'></i></button>
              </div>
            </div>
          </div>
        </div>`;
      row.appendChild(col);
    });

    box.appendChild(card);
  });
}

function removeTask(id){
  tasks = tasks.filter(t=>t.id!==id);
  save(); render();
}

function done(id){
  alert("Task completed!");
}

document.getElementById("taskForm").addEventListener("submit", e=>{
  e.preventDefault();
  const title = taskTitle.value;
  const image = taskImage.value;
  const category = taskCategory.value;
  const size = document.querySelector('input[name="size"]:checked').value;

  tasks.push({ id: Date.now().toString(), title,image,category,size,tint:currentTint });
  save(); render();
  taskForm.reset();
});

document.querySelectorAll('.swatch').forEach(s=>s.onclick=()=>{
  currentTint = s.dataset.color;
  document.documentElement.style.setProperty('--accent',currentTint);
});

render();
</script>

</body>
</html>
